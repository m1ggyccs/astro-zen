---
import Section from "./Section.astro";
import type { ExperienceProps, CertificationProps } from "@types";

interface Props {
  experience: ExperienceProps[];
  certifications?: CertificationProps[];
}

const { experience, certifications = [] } = Astro.props;
---

<Section text="Education" href="experience">
  <div class="mx-auto max-w-5xl">
    <div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:gap-12">
      <!-- Education Column -->
      <div>
        <h3 class="mb-6 font-serif text-2xl font-semibold text-white">
          Education
        </h3>
        {
          experience.map(({ company, position, startDate, endDate, summary }) => (
            <div class="mb-10">
              <h4 class="mb-1.5 font-serif text-2xl font-semibold text-white">
                {company}
              </h4>
              <div class="flex flex-col items-start pb-5">
                <h5 class="mb-0.5 font-serif text-2xl font-medium text-primary">
                  {position}
                </h5>
                <span class="pb-[2px] text-sm text-white/70">
                  {startDate} â€” {endDate}
                </span>
              </div>
              {Array.isArray(summary) ? (
                <ul class="list-none">
                  {summary.map((log) => (
                    <li class="relative mb-3 pl-8 text-base text-neutral before:absolute before:top-1 before:left-0 before:content-[url(/check.svg)]">
                      {log}
                    </li>
                  ))}
                </ul>
              ) : (
                <p class="text-base text-neutral">{summary}</p>
              )}
            </div>
          ))
        }
      </div>

      <!-- Certifications Column -->
      <div>
        <h3 class="mb-6 font-serif text-2xl font-semibold text-white">
          Certifications
        </h3>
        {certifications.length > 0 ? (
          certifications.map(({ name, issuer, issuerLogo, year, credentialId, link }) => (
            <div class="mb-10">
              <div class="flex items-start gap-3 mb-1.5">
                {issuerLogo && (
                  <img
                    src={issuerLogo}
                    alt={`${issuer} logo`}
                    width="40"
                    height="40"
                    loading="lazy"
                    class="mt-1 flex-shrink-0 rounded"
                  />
                )}
                {link ? (
                  <a
                    href={link}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="font-serif text-2xl font-semibold text-white hover:text-primary transition-colors"
                    aria-label={`View ${issuer} certificate`}
                  >
                    {issuer}
                  </a>
                ) : (
                  <h4 class="font-serif text-2xl font-semibold text-white">
                    {issuer}
                  </h4>
                )}
              </div>
              <div class="flex flex-col items-start pb-5">
                {link ? (
                  <a
                    href={link}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="mb-0.5 font-serif text-2xl font-medium text-primary hover:underline"
                    aria-label={`View ${name} certificate`}
                  >
                    {name}
                  </a>
                ) : (
                  <h5 class="mb-0.5 font-serif text-2xl font-medium text-primary">
                    {name}
                  </h5>
                )}
                <span class="pb-[2px] text-sm text-white/70">
                  {year}
                </span>
              </div>
              {credentialId && (
                <p class="relative mb-3 pl-8 text-base text-neutral before:absolute before:top-1 before:left-0 before:content-[url(/check.svg)]">
                  {credentialId}
                </p>
              )}
            </div>
          ))
        ) : (
          <p class="text-base text-neutral">No certifications listed.</p>
        )}
      </div>
    </div>
  </div>
</Section>
